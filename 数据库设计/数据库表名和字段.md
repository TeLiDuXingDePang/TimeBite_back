# 食光机小程序数据库excel表格设计文档

## 表格结构设计

### 1. 食材表 (ingredients)

| 字段名 | 类型 | 描述 | 示例值 |
|--------|------|------|--------|
| id | 数字 | 主键，自增 | 1 |
| name | 文本 | 食材名称，非空 | 胡萝卜 |
| image | 文本 | 食材图片URL | https://example.com/carrot.jpg |
| unit | 文本 | 计量单位 | 个、克、千克 |
| category | 文本 | 食材分类 | 蔬菜、肉类、海鲜 |
| description | 文本 | 食材描述 | 富含胡萝卜素，营养价值高 |
| created_at | 日期时间 | 创建时间 | 2024-03-17 |
| updated_at | 日期时间 | 更新时间 | 2024-03-17  |

### 2. 菜谱表 (recipes)

| 字段名 | 类型 | 描述 | 示例值 |
|--------|------|------|--------|
| id | 数字 | 主键，自增 | 1 |
| name | 文本 | 菜谱名称，非空 | 胡萝卜炒肉 |
| image | 文本 | 菜谱图片URL | https://example.com/recipe.jpg |
| cook_time | 数字 | 烹饪时间(分钟) | 30 |
| calories | 数字 | 卡路里(千卡) | 350 |
| difficulty | 数字 | 难度等级(1-5) | 2 |
| description | 文本 | 菜谱描述 | 简单美味的家常菜 |
| steps | 文本 | 烹饪步骤(JSON格式) | [{"step": 1, "desc": "切胡萝卜"}] |
| created_at | 日期时间 | 创建时间 | 2024-03-17 |
| updated_at | 日期时间 | 更新时间 | 2024-03-17  |

### 3. 菜谱食材关联表 (recipe_ingredients)

| 字段名 | 类型 | 描述 | 示例值 |
|--------|------|------|--------|
| id | 数字 | 主键，自增 | 1 |
| recipe_id | 数字 | 菜谱ID | 1 |
| ingredient_id | 数字 | 食材ID | 1 |
| quantity | 数字 | 食材用量 | 200 |
| unit | 文本 | 计量单位 | 克 |

### 4. 用户表 (users)

| 字段名 | 类型 | 描述 | 示例值 |
|--------|------|------|--------|
| id | 数字 | 主键，自增 | 1 |
| openid | 文本 | 微信openid，唯一，非空 | wx123456789 |
| nickname | 文本 | 用户昵称 | 张三 |
| avatar | 文本 | 用户头像URL | https://example.com/avatar.jpg |
| created_at | 日期时间 | 创建时间 | 2024-03-17 |
| updated_at | 日期时间 | 更新时间 | 2024-03-17  |

### 5. 用户食材库存表 (user_ingredients)

| 字段名 | 类型 | 描述 | 示例值 |
|--------|------|------|--------|
| id | 数字 | 主键，自增 | 1 |
| user_id | 数字 | 用户ID | 1 |
| ingredient_id | 数字 | 食材ID | 1 |
| quantity | 数字 | 库存数量 | 500 |
| expiry_date | 日期 | 过期日期 | 2024-03-20 |
| created_at | 日期时间 | 创建时间 | 2024-03-17 |
| updated_at | 日期时间 | 更新时间 | 2024-03-17  |

## 紧急度计算说明

紧急度是根据用户食材的过期日期动态计算的，计算方法如下：

- **高紧急度(3级)**: 食材将在1天内过期
- **中紧急度(2级)**: 食材将在1-3天内过期
- **低紧急度(1级)**: 食材将在3天以上过期

## 难度等级说明

菜谱的难度等级分为5个等级：
- **1级**: 非常简单，适合新手
- **2级**: 简单，需要基本烹饪技巧
- **3级**: 中等，需要一定烹饪经验
- **4级**: 较难，需要熟练的烹饪技巧
- **5级**: 困难，需要专业烹饪水平 